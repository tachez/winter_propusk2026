<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —É—Ä–æ–≤–Ω–µ–π</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #e0e0e0;
        }
        
        .container {
            background-color: #2d3047;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            color: #ff8a00;
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #ff8a00;
            padding-bottom: 15px;
        }
        
        h2 {
            color: #fdde2d;
            margin-top: 0;
        }
        
        h3 {
            color: #ff8a00;
            margin-top: 0;
            margin-bottom: 20px;
        }
        
        .section {
            background-color: #3a3e5c;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 4px solid #ff8a00;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #c0c0c0;
        }
        
        input, select {
            width: 100%;
            padding: 12px 15px;
            background-color: #2d3047;
            border: 2px solid #666666;
            border-radius: 8px;
            font-size: 16px;
            color: #e0e0e0;
            transition: all 0.3s;
        }
        
        input:focus, select:focus {
            border-color: #ff8a00;
            outline: none;
            box-shadow: 0 0 0 2px rgba(255, 138, 0, 0.2);
        }
        
        .date-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .daily-points-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 15px;
        }
        
        @media (max-width: 768px) {
            .row, .daily-points-row, .date-inputs {
                grid-template-columns: 1fr;
            }
        }
        
        .button-group {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }
        
        button {
            background: linear-gradient(135deg, #ff8a00, #ff6b00);
            color: #1a1a2e;
            border: none;
            padding: 15px 40px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 138, 0, 0.4);
        }
        
        .result {
            background-color: #3a3e5c;
            border-radius: 10px;
            padding: 25px;
            margin-top: 20px;
            border-left: 5px solid #fdde2d;
        }
        
        .progress-bar {
            height: 35px;
            background-color: #2d3047;
            border-radius: 20px;
            margin: 25px 0;
            overflow: hidden;
            border: 2px solid #666666;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff8a00, #fdde2d);
            border-radius: 20px;
            transition: width 1s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #1a1a2e;
            font-weight: bold;
            min-width: 70px;
            font-size: 14px;
        }
        
        .level-info {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            font-weight: 600;
            color: #fdde2d;
            font-size: 18px;
        }
        
        .summary {
            background-color: #2d3047;
            padding: 20px;
            border-radius: 10px;
            margin-top: 25px;
            border: 1px solid #666666;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .summary-item {
            padding: 15px;
            background-color: #3a3e5c;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            border-top: 3px solid #ff8a00;
        }
        
        .summary-item .label {
            font-size: 14px;
            color: #a0a0c0;
            margin-bottom: 5px;
        }
        
        .summary-item .value {
            font-size: 22px;
            font-weight: bold;
            color: #fdde2d;
        }
        
        /* –û–±–º–µ–Ω –∫–µ–π—Å–∞–º–∏ - –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π —Å—Ç–∏–ª—å */
        .cases-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 10px;
        }
        
        .case-type {
            background-color: #2d3047;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #666666;
        }
        
        .case-type h4 {
            color: #fdde2d;
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .case-type .points {
            background-color: #ff8a00;
            color: #1a1a2e;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .case-input {
            margin-bottom: 10px;
        }
        
        .case-levels {
            max-height: 100px;
            overflow-y: auto;
            font-size: 11px;
            line-height: 1.4;
            color: #a0a0c0;
            padding: 8px;
            background-color: #1a1a2e;
            border-radius: 4px;
            border: 1px solid #666666;
        }
        
        .case-levels::-webkit-scrollbar {
            width: 6px;
        }
        
        .case-levels::-webkit-scrollbar-track {
            background: #2d3047;
            border-radius: 3px;
        }
        
        .case-levels::-webkit-scrollbar-thumb {
            background: #888888;
            border-radius: 3px;
        }
        
        .case-levels::-webkit-scrollbar-thumb:hover {
            background: #ff8a00;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        
        .checkbox-group input {
            width: auto;
            margin-right: 10px;
        }
        
        .points-source {
            margin-top: 25px;
            padding: 15px;
            background-color: #2d3047;
            border-radius: 10px;
            border: 1px solid #666666;
        }
        
        .points-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .breakdown-item {
            padding: 10px;
            background-color: #3a3e5c;
            border-radius: 6px;
            text-align: center;
        }
        
        .breakdown-label {
            font-size: 12px;
            color: #a0a0c0;
        }
        
        .breakdown-value {
            font-size: 18px;
            color: #fdde2d;
            font-weight: bold;
        }
        
        .explanation {
            margin-top: 30px;
            padding: 20px;
            background-color: #3a3e5c;
            border-radius: 10px;
            border-left: 5px solid #ff8a00;
        }
        
        .explanation p {
            margin: 8px 0;
            line-height: 1.5;
        }
        
        .helper-text {
            font-size: 12px;
            color: #a0a0c0;
            margin-top: 5px;
            display: block;
        }
        
        .auto-calc-btn {
            background-color: #888888;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            font-size: 12px;
            cursor: pointer;
            transition: background-color 0.2s;
            margin-top: 10px;
            width: 100%;
        }
        
        .auto-calc-btn:hover {
            background-color: #ff8a00;
        }
        
        .notification {
            background-color: #3a3e5c;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid #ff8a00;
            text-align: center;
        }
        
        .notification h4 {
            color: #fdde2d;
            margin-top: 0;
        }
        
        .daily-info {
            background-color: #2d3047;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #666666;
            margin-top: 10px;
        }
        
        .daily-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }
        
        .daily-stat {
            text-align: center;
            padding: 10px;
            background-color: #3a3e5c;
            border-radius: 6px;
        }
        
        .daily-stat .label {
            font-size: 12px;
            color: #a0a0c0;
        }
        
        .daily-stat .value {
            font-size: 18px;
            color: #fdde2d;
            font-weight: bold;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
            
            .summary-grid, .cases-container, .points-breakdown, .daily-stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —É—Ä–æ–≤–Ω–µ–π —Å –∫–µ–π—Å–∞–º–∏</h1>
        
        <div class="section">
            <h3>üìä –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h3>
            <div class="row">
                <div class="input-group">
                    <label for="currentLevel">–¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å:</label>
                    <input type="number" id="currentLevel" value="101" min="1">
                    <button class="auto-calc-btn" onclick="calculateAvailableCases()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–µ–π—Å—ã</button>
                </div>
                
                <div class="input-group">
                    <label for="currentPoints">–¢–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–∫–æ–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ:</label>
                    <input type="number" id="currentPoints" value="10350" min="0">
                </div>
                
                <div class="input-group">
                    <label for="levelLimit">–õ–∏–º–∏—Ç –æ—á–∫–æ–≤ –Ω–∞ —Ç–µ–∫—É—â–µ–º —É—Ä–æ–≤–Ω–µ:</label>
                    <input type="number" id="levelLimit" value="10900" min="1">
                </div>
                
                <div class="input-group">
                    <label for="increasePerLevel">–£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –Ω–∞ –∫–∞–∂–¥—ã–π —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å:</label>
                    <input type="number" id="increasePerLevel" value="100" min="0">
                </div>
            </div>
            
            <div class="daily-info">
                <h4 style="color:#fdde2d; margin-top:0;">üìÖ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—á–∫–∏</h4>
                <div class="daily-points-row">
                    <div class="input-group">
                        <label for="dailyLimit">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –ª–∏–º–∏—Ç –æ—á–∫–æ–≤:</label>
                        <input type="number" id="dailyLimit" value="6000" min="1">
                    </div>
                    
                    <div class="input-group">
                        <label for="todayPoints">–£–∂–µ –Ω–∞–±—Ä–∞–Ω–æ –æ—á–∫–æ–≤ —Å–µ–≥–æ–¥–Ω—è:</label>
                        <input type="number" id="todayPoints" value="0" min="0" max="6000">
                        <span class="helper-text">–û—á–∫–∏, —É–∂–µ –Ω–∞–±—Ä–∞–Ω–Ω—ã–µ —Å–µ–≥–æ–¥–Ω—è (–¥–æ 6000)</span>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="input-group">
                    <label for="startDate">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞:</label>
                    <input type="date" id="startDate" value="2025-02-01">
                </div>
                
                <div class="input-group">
                    <label for="endDate">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è (–≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ):</label>
                    <input type="date" id="endDate" value="2025-02-28">
                </div>
            </div>
        </div>
        
        <div class="section">
            <h3>üéÅ –û–±–º–µ–Ω –∫–µ–π—Å–æ–≤ –Ω–∞ –æ—á–∫–∏</h3>
            <div class="cases-container">
                <div class="case-type">
                    <h4>–û–±—ã—á–Ω—ã–µ –∫–µ–π—Å—ã <span class="points">1000 –æ—á–∫–æ–≤</span></h4>
                    <div class="case-input">
                        <label for="smallCases">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
                        <input type="number" id="smallCases" value="0" min="0">
                    </div>
                    <div class="case-levels">
                        –£—Ä–æ–≤–Ω–∏: 3,5,7,8,9,11,13,15,17,18,19,21,23,25,26,27,29,31,33,35,37,38,39,41,43,45,47,48,49,51,53,55,56,57,59,61,63,65,67,68,69,71,73,75,77,78,79,81,83,85,86,87,89,91,93,95,97,98,107,111
                    </div>
                </div>
                
                <div class="case-type">
                    <h4>–ë–æ–ª—å—à–∏–µ –∫–µ–π—Å—ã <span class="points">5000 –æ—á–∫–æ–≤</span></h4>
                    <div class="case-input">
                        <label for="bigCases">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</label>
                        <input type="number" id="bigCases" value="0" min="0">
                    </div>
                    <div class="case-levels">
                        –£—Ä–æ–≤–Ω–∏: 14,30,44,60,74,90,105
                    </div>
                </div>
            </div>
        </div>
        
        <div class="section">
            <h3>‚ö° –£—Å–∏–ª–∏—Ç–µ–ª–∏</h3>
            <div class="row">
                <div class="input-group">
                    <label for="boosters">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–∏–ª–∏—Ç–µ–ª–µ–π:</label>
                    <input type="number" id="boosters" value="0" min="0">
                </div>
                
                <div class="input-group">
                    <label for="boosterPoints">–û—á–∫–æ–≤ –∑–∞ –æ–±–º–µ–Ω –ø—Ä–∏–∑–æ–≤ –≤ –æ–¥–Ω–æ–º —É—Å–∏–ª–∏—Ç–µ–ª–µ:</label>
                    <input type="number" id="boosterPoints" value="0" min="0" max="4000">
                    <span class="helper-text">–ú–∞–∫—Å–∏–º—É–º 4000 (4 –∫–µ–π—Å–∞ √ó 1000 –æ—á–∫–æ–≤)</span>
                </div>
            </div>
        </div>
        
        <div class="button-group">
            <button id="calculateBtn">üéØ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
        </div>
        
        <div class="result" id="resultSection" style="display: none;">
            <h2>üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á—ë—Ç–∞</h2>
            <div id="notification" style="display: none;"></div>
            
            <div class="daily-stats">
                <div class="daily-stat">
                    <div class="label">–î–Ω–µ–π –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</div>
                    <div class="value" id="daysCount">0</div>
                </div>
                <div class="daily-stat">
                    <div class="label">–û—á–∫–æ–≤ —Å–µ–≥–æ–¥–Ω—è –¥–æ—Å—Ç—É–ø–Ω–æ</div>
                    <div class="value" id="todayAvailable">0</div>
                </div>
            </div>
            
            <div id="finalLevelInfo"></div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            
            <div class="level-info">
                <span id="currentProgressText">0/0</span>
                <span id="levelText">–£—Ä–æ–≤–µ–Ω—å: 0</span>
            </div>
            
            <div class="points-source">
                <h3>–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –æ—á–∫–æ–≤</h3>
                <div class="points-breakdown" id="pointsBreakdown"></div>
            </div>
            
            <div class="summary">
                <h3>üìä –°–≤–æ–¥–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                <div class="summary-grid" id="summaryGrid"></div>
            </div>
        </div>
        
        <div class="explanation">
            <h3>üìñ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ä–∞—Å—á—ë—Ç:</h3>
            <p>1. –°–Ω–∞—á–∞–ª–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –æ—á–∫–∏ –æ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞ –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥</p>
            <p>2. –£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —É–∂–µ –Ω–∞–±—Ä–∞–Ω–Ω—ã–µ –æ—á–∫–∏ —Å–µ–≥–æ–¥–Ω—è (–≤—ã—á–∏—Ç–∞—é—Ç—Å—è –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö)</p>
            <p>3. –ó–∞—Ç–µ–º –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –æ—á–∫–∏ –æ—Ç –æ–±–º–µ–Ω–∞ –∫–µ–π—Å–æ–≤ (–æ–±—ã—á–Ω—ã–µ –∏ –±–æ–ª—å—à–∏–µ)</p>
            <p>4. –î–∞–ª–µ–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –æ—á–∫–∏ –æ—Ç –æ–±–º–µ–Ω–∞ –ø—Ä–∏–∑–æ–≤ –≤ —É—Å–∏–ª–∏—Ç–µ–ª—è—Ö</p>
            <p>5. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏—Ç–æ–≥–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å —Å —É—á—ë—Ç–æ–º –≤—Å–µ—Ö –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –æ—á–∫–æ–≤</p>
            <p>6. –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è, —á—Ç–æ –ª–∏–º–∏—Ç –∫–∞–∂–¥–æ–≥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ</p>
            <p><strong>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</strong> –ö–µ–π—Å—ã –Ω–∞ —É—Ä–æ–≤–Ω—è—Ö –Ω–∏–∂–µ —Ç–µ–∫—É—â–µ–≥–æ —É–∂–µ –ø–æ–ª—É—á–µ–Ω—ã –∏ –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ —Ä–∞—Å—á—ë—Ç–µ</p>
        </div>
    </div>

    <script>
        // –£—Ä–æ–≤–Ω–∏ —Å –∫–µ–π—Å–∞–º–∏
        const smallCaseLevels = [3,5,7,8,9,11,13,15,17,18,19,21,23,25,26,27,29,31,33,35,37,38,39,41,43,45,47,48,49,51,53,55,56,57,59,61,63,65,67,68,69,71,73,75,77,78,79,81,83,85,86,87,89,91,93,95,97,98,107,111];
        const bigCaseLevels = [14,30,44,60,74,90,105];
        
        document.getElementById('calculateBtn').addEventListener('click', calculateProgress);
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–µ–≥–æ–¥–Ω—è—à–Ω—é—é –¥–∞—Ç—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('startDate').value = today;
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞—Ç—É —á–µ—Ä–µ–∑ 27 –¥–Ω–µ–π (28 –¥–Ω–µ–π –≤–∫–ª—é—á–∞—è —Å–µ–≥–æ–¥–Ω—è)
        const futureDate = new Date();
        futureDate.setDate(futureDate.getDate() + 27);
        document.getElementById('endDate').value = futureDate.toISOString().split('T')[0];
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥—Å—á—ë—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–µ–π—Å–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—é
        function calculateAvailableCases() {
            const currentLevel = parseInt(document.getElementById('currentLevel').value);
            
            // –ü–û–î–°–ß–ò–¢–´–í–ê–ï–ú –¢–û–õ–¨–ö–û –ö–ï–ô–°–´ –ù–ê –£–†–û–í–ù–Ø–• –í–´–®–ï –¢–ï–ö–£–©–ï–ì–û
            const smallCasesAvailable = smallCaseLevels.filter(level => level > currentLevel).length;
            const bigCasesAvailable = bigCaseLevels.filter(level => level > currentLevel).length;
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ø–æ–ª—è
            document.getElementById('smallCases').value = smallCasesAvailable;
            document.getElementById('bigCases').value = bigCasesAvailable;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            const notificationDiv = document.getElementById('notification');
            notificationDiv.style.display = 'block';
            
            let message = '';
            if (smallCasesAvailable > 0 || bigCasesAvailable > 0) {
                message = `
                    <div class="notification">
                        <h4>üéØ –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–µ–π—Å—ã –ø–æ—Å–ª–µ —É—Ä–æ–≤–Ω—è ${currentLevel}</h4>
                        <p>–ë—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ –±—É–¥—É—â–∏—Ö —É—Ä–æ–≤–Ω—è—Ö:</p>
                        <p><strong>${smallCasesAvailable}</strong> –æ–±—ã—á–Ω—ã—Ö –∫–µ–π—Å–æ–≤ (${smallCasesAvailable * 1000} –æ—á–∫–æ–≤)</p>
                        <p><strong>${bigCasesAvailable}</strong> –±–æ–ª—å—à–∏—Ö –∫–µ–π—Å–æ–≤ (${bigCasesAvailable * 5000} –æ—á–∫–æ–≤)</p>
                        <p><strong>–ò—Ç–æ–≥–æ:</strong> ${(smallCasesAvailable * 1000 + bigCasesAvailable * 5000).toLocaleString()} –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—á–∫–æ–≤</p>
                        <p><small>–ö–µ–π—Å—ã –Ω–∞ —É—Ä–æ–≤–Ω—è—Ö ‚â§ ${currentLevel} —É–∂–µ –ø–æ–ª—É—á–µ–Ω—ã –∏ –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è</small></p>
                    </div>
                `;
            } else {
                message = `
                    <div class="notification">
                        <h4>üéØ –ö–µ–π—Å—ã –ø–æ—Å–ª–µ —É—Ä–æ–≤–Ω—è ${currentLevel}</h4>
                        <p>–ù–∞ —É—Ä–æ–≤–Ω—è—Ö –≤—ã—à–µ ${currentLevel} –∫–µ–π—Å–æ–≤ –Ω–µ—Ç</p>
                        <p><small>–í—Å–µ –∫–µ–π—Å—ã —É–∂–µ –ø–æ–ª—É—á–µ–Ω—ã –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —É—Ä–æ–≤–Ω—è—Ö</small></p>
                    </div>
                `;
            }
            
            notificationDiv.innerHTML = message;
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ–º —Ä–∞—Å—á—ë—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
            setTimeout(calculateProgress, 500);
        }
        
        function calculateProgress() {
            // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Ñ–æ—Ä–º—ã
            const currentLevel = parseInt(document.getElementById('currentLevel').value);
            const currentPoints = parseInt(document.getElementById('currentPoints').value);
            const levelLimit = parseInt(document.getElementById('levelLimit').value);
            const increasePerLevel = parseInt(document.getElementById('increasePerLevel').value);
            const dailyLimit = parseInt(document.getElementById('dailyLimit').value);
            const todayPoints = parseInt(document.getElementById('todayPoints').value);
            const startDate = new Date(document.getElementById('startDate').value);
            const endDate = new Date(document.getElementById('endDate').value);
            const smallCases = parseInt(document.getElementById('smallCases').value);
            const bigCases = parseInt(document.getElementById('bigCases').value);
            const boosters = parseInt(document.getElementById('boosters').value);
            const boosterPoints = parseInt(document.getElementById('boosterPoints').value);
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
            if (currentPoints > levelLimit) {
                alert('–¢–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–∫–æ–≤ –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å –ª–∏–º–∏—Ç —É—Ä–æ–≤–Ω—è!');
                return;
            }
            
            if (startDate > endDate) {
                alert('–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–∑–∂–µ –¥–∞—Ç—ã –æ–∫–æ–Ω—á–∞–Ω–∏—è!');
                return;
            }
            
            if (todayPoints > dailyLimit) {
                alert('–£–∂–µ –Ω–∞–±—Ä–∞–Ω–Ω—ã–µ –æ—á–∫–∏ —Å–µ–≥–æ–¥–Ω—è –Ω–µ –º–æ–≥—É—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç!');
                document.getElementById('todayPoints').value = dailyLimit;
                return;
            }
            
            if (boosterPoints > 4000) {
                alert('–û—á–∫–æ–≤ –∑–∞ –æ–±–º–µ–Ω –ø—Ä–∏–∑–æ–≤ –≤ –æ–¥–Ω–æ–º —É—Å–∏–ª–∏—Ç–µ–ª–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ 4000 (4 –∫–µ–π—Å–∞ √ó 1000)!');
                document.getElementById('boosterPoints').value = 4000;
                return;
            }
            
            // –í—ã—á–∏—Å–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π (–≤–∫–ª—é—á–∞—è –æ–±–µ –¥–∞—Ç—ã)
            const timeDiff = endDate.getTime() - startDate.getTime();
            const days = Math.floor(timeDiff / (1000 * 3600 * 24)) + 1;
            
            // 1. –û—á–∫–∏ –æ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞ (—É—á–∏—Ç—ã–≤–∞–µ–º —É–∂–µ –Ω–∞–±—Ä–∞–Ω–Ω—ã–µ —Å–µ–≥–æ–¥–Ω—è)
            // –ï—Å–ª–∏ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å –≤—Ö–æ–¥–∏—Ç –≤ –ø–µ—Ä–∏–æ–¥, –≤—ã—á–∏—Ç–∞–µ–º —É–∂–µ –Ω–∞–±—Ä–∞–Ω–Ω—ã–µ –æ—á–∫–∏
            const todayAvailable = Math.max(0, dailyLimit - todayPoints);
            
            // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ—á–∫–æ–≤ –æ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞
            const dailyPoints = (days * dailyLimit) - todayPoints;
            
            // 2. –û—á–∫–∏ –æ—Ç –æ–±–º–µ–Ω–∞ –∫–µ–π—Å–æ–≤
            const casePoints = (smallCases * 1000) + (bigCases * 5000);
            
            // 3. –û—á–∫–∏ –æ—Ç —É—Å–∏–ª–∏—Ç–µ–ª–µ–π
            const boosterTotalPoints = boosters * boosterPoints;
            
            // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ—á–∫–æ–≤
            const totalPointsAvailable = dailyPoints + casePoints + boosterTotalPoints;
            
            // –û—á–∫–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
            const pointsNeededForCurrentLevel = levelLimit - currentPoints;
            
            // –û—á–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ—Å—Ç–∞–Ω—É—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
            let remainingPoints = totalPointsAvailable - pointsNeededForCurrentLevel;
            
            // –ï—Å–ª–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –æ—á–∫–æ–≤ –¥–∞–∂–µ –Ω–∞ —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å
            if (remainingPoints < 0) {
                const finalPoints = currentPoints + totalPointsAvailable;
                const progressPercent = Math.min(100, (finalPoints / levelLimit) * 100);
                
                document.getElementById('resultSection').style.display = 'block';
                document.getElementById('daysCount').textContent = days;
                document.getElementById('todayAvailable').textContent = todayAvailable.toLocaleString();
                
                document.getElementById('finalLevelInfo').innerHTML = `
                    <p>–ö <strong>${endDate.toLocaleDateString('ru-RU')}</strong> –≤—ã –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç–µ —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å.</p>
                `;
                
                document.getElementById('progressFill').style.width = `${progressPercent}%`;
                document.getElementById('progressFill').textContent = `${progressPercent.toFixed(1)}%`;
                document.getElementById('currentProgressText').textContent = 
                    `${finalPoints.toLocaleString()} / ${levelLimit.toLocaleString()}`;
                document.getElementById('levelText').textContent = `–£—Ä–æ–≤–µ–Ω—å: ${currentLevel}`;
                
                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–∞–∑–±–∏–≤–∫—É –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º –æ—á–∫–æ–≤
                document.getElementById('pointsBreakdown').innerHTML = `
                    <div class="breakdown-item">
                        <div class="breakdown-label">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –ª–∏–º–∏—Ç</div>
                        <div class="breakdown-value">${dailyPoints.toLocaleString()}</div>
                    </div>
                    <div class="breakdown-item">
                        <div class="breakdown-label">–ö–µ–π—Å—ã</div>
                        <div class="breakdown-value">${casePoints.toLocaleString()}</div>
                    </div>
                    <div class="breakdown-item">
                        <div class="breakdown-label">–£—Å–∏–ª–∏—Ç–µ–ª–∏</div>
                        <div class="breakdown-value">${boosterTotalPoints.toLocaleString()}</div>
                    </div>
                    <div class="breakdown-item" style="border-top: 2px solid #ff8a00; padding-top: 15px;">
                        <div class="breakdown-label">–í—Å–µ–≥–æ –æ—á–∫–æ–≤</div>
                        <div class="breakdown-value" style="color:#ff8a00;">${totalPointsAvailable.toLocaleString()}</div>
                    </div>
                `;
                
                document.getElementById('summaryGrid').innerHTML = `
                    <div class="summary-item">
                        <div class="label">–î–Ω–µ–π –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</div>
                        <div class="value">${days}</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">–û—á–∫–æ–≤ —Å–µ–≥–æ–¥–Ω—è –¥–æ—Å—Ç—É–ø–Ω–æ</div>
                        <div class="value">${todayAvailable.toLocaleString()}</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">–í—Å–µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ –æ—á–∫–æ–≤</div>
                        <div class="value">${totalPointsAvailable.toLocaleString()}</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">–ü—Ä–æ–≥—Ä–µ—Å—Å –Ω–∞ —É—Ä–æ–≤–Ω–µ</div>
                        <div class="value">${progressPercent.toFixed(1)}%</div>
                    </div>
                    <div class="summary-item">
                        <div class="label">–ò—Ç–æ–≥–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å</div>
                        <div class="value">${currentLevel}</div>
                    </div>
                `;
                
                return;
            }
            
            // –ù–∞—á–∏–Ω–∞–µ–º —Å —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
            let targetLevel = currentLevel;
            let currentLevelLimit = levelLimit;
            let pointsForNextLevel = levelLimit - currentPoints;
            
            // –°–Ω–∞—á–∞–ª–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ—á–∫–∏ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
            remainingPoints -= pointsForNextLevel;
            targetLevel++;
            currentLevelLimit = levelLimit + increasePerLevel;
            
            // –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ —É—Ä–æ–≤–Ω—è–º, –ø–æ–∫–∞ —Ö–≤–∞—Ç–∞–µ—Ç –æ—á–∫–æ–≤
            while (remainingPoints >= currentLevelLimit) {
                remainingPoints -= currentLevelLimit;
                targetLevel++;
                currentLevelLimit += increasePerLevel;
            }
            
            // –î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º —É—Ä–æ–≤–Ω–µ
            const lastLevelPoints = remainingPoints > 0 ? remainingPoints : 0;
            const lastLevelLimit = currentLevelLimit;
            const progressPercent = remainingPoints > 0 ? 
                (lastLevelPoints / lastLevelLimit) * 100 : 100;
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
            document.getElementById('resultSection').style.display = 'block';
            document.getElementById('daysCount').textContent = days;
            document.getElementById('todayAvailable').textContent = todayAvailable.toLocaleString();
            
            if (remainingPoints > 0) {
                document.getElementById('finalLevelInfo').innerHTML = `
                    <p>–ö <strong>${endDate.toLocaleDateString('ru-RU')}</strong> –≤—ã –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç–µ <strong style="color:#fdde2d">${targetLevel}-–≥–æ —É—Ä–æ–≤–Ω—è</strong> 
                    —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º <strong style="color:#ff8a00">${lastLevelPoints.toLocaleString()} / ${lastLevelLimit.toLocaleString()}</strong> –æ—á–∫–æ–≤.</p>
                `;
            } else {
                document.getElementById('finalLevelInfo').innerHTML = `
                    <p>–ö <strong>${endDate.toLocaleDateString('ru-RU')}</strong> –≤—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–∏—Ç–µ <strong style="color:#fdde2d">${targetLevel}-–π —É—Ä–æ–≤–µ–Ω—å</strong>.</p>
                `;
            }
            
            document.getElementById('progressFill').style.width = `${progressPercent}%`;
            document.getElementById('progressFill').textContent = `${progressPercent.toFixed(1)}%`;
            
            if (remainingPoints > 0) {
                document.getElementById('currentProgressText').textContent = 
                    `${lastLevelPoints.toLocaleString()} / ${lastLevelLimit.toLocaleString()}`;
            } else {
                document.getElementById('currentProgressText').textContent = 
                    `${lastLevelLimit.toLocaleString()} / ${lastLevelLimit.toLocaleString()}`;
            }
            
            document.getElementById('levelText').textContent = `–£—Ä–æ–≤–µ–Ω—å: ${targetLevel}`;
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–∞–∑–±–∏–≤–∫—É –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º –æ—á–∫–æ–≤
            document.getElementById('pointsBreakdown').innerHTML = `
                <div class="breakdown-item">
                    <div class="breakdown-label">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –ª–∏–º–∏—Ç</div>
                    <div class="breakdown-value">${dailyPoints.toLocaleString()}</div>
                </div>
                <div class="breakdown-item">
                    <div class="breakdown-label">–ö–µ–π—Å—ã</div>
                    <div class="breakdown-value">${casePoints.toLocaleString()}</div>
                </div>
                <div class="breakdown-item">
                    <div class="breakdown-label">–£—Å–∏–ª–∏—Ç–µ–ª–∏</div>
                    <div class="breakdown-value">${boosterTotalPoints.toLocaleString()}</div>
                </div>
                <div class="breakdown-item" style="border-top: 2px solid #ff8a00; padding-top: 15px;">
                    <div class="breakdown-label">–í—Å–µ–≥–æ –æ—á–∫–æ–≤</div>
                    <div class="breakdown-value" style="color:#ff8a00;">${totalPointsAvailable.toLocaleString()}</div>
                </div>
            `;
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Å–≤–æ–¥–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
            const levelsCompleted = targetLevel - currentLevel;
            const totalPointsSpent = totalPointsAvailable - remainingPoints;
            
            document.getElementById('summaryGrid').innerHTML = `
                <div class="summary-item">
                    <div class="label">–î–Ω–µ–π –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞</div>
                    <div class="value">${days}</div>
                </div>
                <div class="summary-item">
                    <div class="label">–û—á–∫–æ–≤ —Å–µ–≥–æ–¥–Ω—è –¥–æ—Å—Ç—É–ø–Ω–æ</div>
                    <div class="value">${todayAvailable.toLocaleString()}</div>
                </div>
                <div class="summary-item">
                    <div class="label">–í—Å–µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ –æ—á–∫–æ–≤</div>
                    <div class="value">${totalPointsAvailable.toLocaleString()}</div>
                </div>
                <div class="summary-item">
                    <div class="label">–ü–æ—Ç—Ä–∞—á–µ–Ω–æ –æ—á–∫–æ–≤</div>
                    <div class="value">${totalPointsSpent.toLocaleString()}</div>
                </div>
                <div class="summary-item">
                    <div class="label">–ó–∞–≤–µ—Ä—à–µ–Ω–æ —É—Ä–æ–≤–Ω–µ–π</div>
                    <div class="value">${levelsCompleted}</div>
                </div>
                <div class="summary-item">
                    <div class="label">–ü—Ä–æ–≥—Ä–µ—Å—Å –Ω–∞ —É—Ä–æ–≤–Ω–µ</div>
                    <div class="value">${progressPercent.toFixed(1)}%</div>
                </div>
                <div class="summary-item">
                    <div class="label">–ò—Ç–æ–≥–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å</div>
                    <div class="value">${targetLevel}</div>
                </div>
                <div class="summary-item">
                    <div class="label">–û—Å—Ç–∞–ª–æ—Å—å –æ—á–∫–æ–≤</div>
                    <div class="value">${remainingPoints > 0 ? remainingPoints.toLocaleString() : '0'}</div>
                </div>
                <div class="summary-item">
                    <div class="label">–û—á–∫–æ–≤ –¥–æ —Å–ª–µ–¥. —É—Ä–æ–≤–Ω—è</div>
                    <div class="value">${remainingPoints > 0 ? (lastLevelLimit - lastLevelPoints).toLocaleString() : '0'}</div>
                </div>
            `;
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('DOMContentLoaded', () => {
            setTimeout(calculateProgress, 500);
        });
        
        // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤–≤–æ–¥–∞ –¥–ª—è "–£–∂–µ –Ω–∞–±—Ä–∞–Ω–æ –æ—á–∫–æ–≤ —Å–µ–≥–æ–¥–Ω—è"
        document.getElementById('todayPoints').addEventListener('change', function() {
            const dailyLimit = parseInt(document.getElementById('dailyLimit').value);
            if (this.value > dailyLimit) {
                this.value = dailyLimit;
            }
        });
    </script>
</body>
</html>
